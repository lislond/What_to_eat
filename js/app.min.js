$(function () {
  function t(t, e) {
    return (t = t || 100), (e = e || 0), Math.ceil(Math.random() * (t - e) + e);
  }

  function e(t) {
    var e = $("<div class='comment'>" + t + "</div>");
    e.on("animationend webkitAnimationEnd", function (t) {
      $(this).remove();
    }).appendTo(g);
  }

  function n(t, e) {
    if (!i) {
      if (
        ((d = t),
        o.text(m[d][0]),
        s.text("啥呢"),
        c.text("?"),
        a.addClass("shake"),
        (k = 0),
        e)
      ) {
        var n = $(".tip").show();
        setTimeout(function () {
          n.remove();
        }, 4e3);
      }
      _hmt.push(["_trackEvent", "time", "change", m[d][0]]);
    }
  }
  var i = 0,
    a = $(".title"),
    o = $(".time"),
    s = $(".what"),
    c = $(".punctuation"),
    l = $("#start"),
    r = $("#temp_container"),
    m = [
      ["早上", "包子 豆浆 胡辣汤 面包 粥 茶叶蛋 掉渣饼 杂粮煎饼".split(" ")],
      ["中午"],
      [
        "下午",
        "拉面 烩面 热干面 刀削面 油泼面 炸酱面 炒面 重庆小面 米线 过桥米线 酸辣粉 土豆粉 螺狮粉 新疆炒米粉 锡纸花甲粉 凉皮 肉夹馍 羊肉汤 炒饭 盖浇饭 卤肉饭 烤肉饭 黄焖鸡米饭 驴肉火烧 川菜 火锅 酸菜鱼 烤串 披萨 烤鸭 汉堡 炸鸡 煎饼果子 生煎 麻辣拌 麻辣烫 麻辣香锅 冒菜 饺子 馄饨 土豆片夹馍".split(
          " "
        ),
      ],
    ],
    h =
      "小雪 益禾堂 霸王茶姬 茶话弄 茶百道 一黑黑 书亦 幸运咖 库迪 瑞幸 可口可乐 百事可乐 冰峰 水溶C 脉动 三得利乌龙茶 无糖可乐 雪碧 屌丝饮料 酸奶 矿泉水 白开水".split(
        " "
      ),
    u = "大哥，饶命啊大哥 吃吃吃，就知道吃".split(" "),
    d = 2,
    p = new Date().getHours(),
    f = $(window),
    g = $("body"),
    v = $("#wrapper"),
    x = $(".os"),
    k = 0,
    w = "eat",
    b,
    C,
    E;
  (m[1][1] = m[2][1]),
    a.on("animationend webkitAnimationEnd", function (t) {
      $(this).removeClass("shake");
    }),
    r.on("animationend webkitAnimationEnd", function (t) {
      $(t.target).remove();
    }),
    l.click(function () {
      if ((g.toggleClass("playing", !i), i)) {
        i = 0;
        "drink" == w && x.text(u[t(u.length)]);
        c.text("！");
        l.find("span").text("换一个");
        clearTimeout(b);
        document.title = a.text() + "快去干饭吧！";
        $("#m-toast-inner-text").text("快去干饭吧");
        $("#m-toast-pop").fadeIn();
        setTimeout(function () {
          $("#m-toast-pop").fadeOut();
        }, 2000);
      } else {
        i = 1;
        k++;
        2 == k && e("我就知道你会换一个");
        5 == k && e("你到底吃不吃");
        10 == k && e("你是吃了炫迈吗？");
        20 == k && e("别挑了，就吃这个");
        30 == k && e("不吃拉倒");
        var n = "eat" == w ? m[d][1] : h;
        c.text("?");
        l.find("span").text("停");
        x.text("");
        (function o() {
          var e = t(n.length) - 1,
            i = n[e],
            a = t(C),
            c = t(E - 50),
            l = t(37, 14);
          s.text(i);
          var m = $("<span class='temp'>" + i + "</span>")
            .css({
              top: a,
              left: c,
              color: "rgba(0,0,0," + t(7, 3) / 10 + ")",
              fontSize: l + "px",
            })
            .appendTo(r);
          b = setTimeout(o, 60);
        })();
      }
    });
  $("#toggle span").click(function () {
    $(this).hasClass("selected") ||
      ($(this).addClass("selected").siblings().removeClass("selected"),
      (w = $(this).data("type")),
      // alert("drink" == w ? "" : ""),
      (k = 0),
      _hmt.push(["_trackEvent", "type", "toggle", w]));
    $("#eat-drink").text($(this).data("type"));
    switch ($(this).data("type")) {
      case "eat":
        $("#eat-drink").text("吃");
        break;
      case "drink":
        $("#eat-drink").text("喝");
        break;
    }
  }),
    9 > p || p >= 23 ? n(0, 1) : 13 > p && n(1, 1),
    a.click(function () {
      n(d >= m.length - 1 ? 0 : d + 1);
    }),
    // $("#ribbon").click(function () {
    //     return alert(this.title), !1
    // }),
    f
      .resize(function () {
        (E = f.width()), (C = f.height());
      })
      .resize();
});
